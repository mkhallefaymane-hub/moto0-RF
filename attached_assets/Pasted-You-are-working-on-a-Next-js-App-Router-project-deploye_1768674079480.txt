You are working on a Next.js App Router project deployed on Vercel using Supabase.
Problem: When I publish a listing, it succeeds in the UI but NOTHING is inserted into the Supabase listings table. The table stays empty, and /api/listings returns {"listings": []}. Admin also sees nothing.

GOAL: Make publishing a listing insert a row into Supabase and make GET /api/listings read from Supabase. Keep it simple: RLS can stay DISABLED for now. Focus on correctness and logging.

CONTEXT:
- Current project has app/api/listings/route.ts (previously used JSON files) and app/api/admin/route.ts.
- I already added environment variables in Replit and Vercel:
  SUPABASE_URL
  SUPABASE_ANON_KEY
  SUPABASE_SERVICE_ROLE_KEY
- Supabase has tables: listings, admins, trends (public schema).
- Upload endpoint may exist but first fix listings insert/select.

TASKS (DO IN ORDER):
1) Inspect app/api/listings/route.ts. Remove any fs/path JSON storage logic. Replace it fully with Supabase.
2) Create lib/supabase.ts with:
   - supabase (anon client) for client usage if needed
   - supabaseAdmin (service role) ONLY for server routes
   Use SUPABASE_URL and SUPABASE_SERVICE_ROLE_KEY on server.
   Add clear error message if env vars missing.
3) Implement GET /api/listings:
   - Query supabaseAdmin.from('listings').select('*').order('created_at', { ascending: false })
   - Return { listings: data || [] }
4) Implement POST /api/listings:
   - Parse JSON body
   - Build a listing object that matches the table columns.
   - Insert using supabaseAdmin.from('listings').insert(listing).select().single()
   - Ensure status defaults to 'PENDING'
   - Ensure created_at is set (or let DB default).
   - Return inserted row.
5) Add strong server-side logging:
   - console.log("POST /api/listings body:", body)
   - console.log("Supabase insert error:", error)
   - console.log("Inserted:", data)
6) Verify the column names. If the Supabase table columns are different, adapt the mapping.
   - If the table currently has only (id, title, price, city, description, images, status, created_at), map accordingly.
   - If needed, add a SQL migration in a comment for missing columns.
7) Ensure the route works on Vercel:
   - Do not use filesystem
   - Do not use crypto.randomUUID() if your id is generated by Supabase; prefer letting Supabase generate UUID.
8) After changes:
   - Run build/test
   - Provide quick manual test steps:
     a) POST /api/listings with sample JSON
     b) GET /api/listings returns it
     c) Admin page shows it

IMPORTANT:
- Do not touch authentication now.
- Do not implement RLS policies now.
- Keep changes minimal and safe.
- If you find the admin page uses /api/admin to fetch listings, update that API too to read from Supabase listings table.